{"version":3,"sources":["utils/config.js","utils/near.js","components/Header.js","utils/methods.js","components/Causes.js","App.js","reportWebVitals.js","index.js"],"names":["CONTRACT_NAME","environment","env","networkId","nodeUrl","contractName","walletUrl","helperUrl","explorerUrl","Error","nearEnv","a","connect","Object","assign","deps","keyStore","keyStores","BrowserLocalStorageKeyStore","near","window","walletConnection","WalletConnection","accountId","getAccountId","contract","Contract","account","viewMethods","changeMethods","ButtonAppBar","Box","sx","flexGrow","AppBar","position","Toolbar","Typography","variant","component","Button","marginLeft","color","onClick","signOut","location","reload","requestSignIn","GAS","getCauses","supportCause","causeIndex","amount","Causes","useState","causes","setCauses","useEffect","then","res","catch","err","console","log","support","document","getElementById","value","utils","format","parseNearAmount","Container","py","maxWidth","length","Grid","container","spacing","map","cause","i","item","xs","sm","md","Card","height","display","flexDirection","CardMedia","image","alt","maxHeight","CardContent","paddingBottom","title","paragraph","description","CardActions","formatNearAmount","OutlinedInput","fullWidth","inputProps","inputMode","pattern","id","defaultValue","size","endAdornment","InputAdornment","marginBottom","type","onChange","e","target","disabled","beneficiary","App","className","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","nearInitPromise","initializeContract","ReactDOM","createRoot","render","StrictMode","error"],"mappings":"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","file":"static/js/main.1a240107.chunk.js","sourcesContent":["const CONTRACT_NAME = \"social-good.adriano.testnet\"\n\nfunction environment(env) {\n  switch (env) {\n    case \"mainnet\": \n      return {\n        networkId: \"mainnet\",\n        nodeUrl: \"https://rpc.mainnet.near.org\",\n        contractName: CONTRACT_NAME,\n        walletUrl: \"https://wallet.near.org\",\n        helperUrl: \"https://helper.mainnet.near.org\",\n        explorerUrl: \"https://explorer.mainnet.near.org\",\n      };\n    case \"testnet\": \n      return {\n        networkId: \"testnet\",\n        nodeUrl: \"https://rpc.testnet.near.org\",\n        contractName: CONTRACT_NAME,\n        walletUrl: \"https://wallet.testnet.near.org\",\n        helperUrl: \"https://helper.testnet.near.org\",\n        explorerUrl: \"https://explorer.testnet.near.org\",\n      };\n    default:\n      throw Error(`Unknown environment '${env}'.`);\n  }\n}\n\nexport default environment;","import environment from './config';\nimport { connect, Contract, keyStores, WalletConnection } from 'near-api-js';\nimport { formatNearAmount } from 'near-api-js/lib/utils/format';\n\nconst nearEnv = environment('testnet');\n\nexport async function initializeContract() {\n  const near = await connect(Object.assign({ deps: { keyStore: new keyStores.BrowserLocalStorageKeyStore() } }, nearEnv));\n  window.walletConnection = new WalletConnection(near);\n  window.accountId = window.walletConnection.getAccountId();\n  window.contract = new Contract(\n    window.walletConnection.account(),\n    nearEnv.contractName,\n    {\n      viewMethods: ['getCauses'],\n      changeMethods: ['addCause', 'supportCause'],\n    }\n  );\n}\n\nexport async function accountBalance() {\n  return formatNearAmount(\n    (await window.walletConnection.account().getAccountBalance()).total,\n    2\n  );\n}\n\nexport async function getAccountId() {\n  return window.walletConnection.getAccountId();\n}\n\nexport function login() {\n  window.walletConnection.requestSignIn(nearEnv.contractName);\n}\n\nexport function logout() {\n  window.walletConnection.signOut();\n  window.location.reload();\n}","import * as React from 'react';\n\nimport { login, logout } from \"../utils/near\";\n\nimport {\n  AppBar,\n  Box,\n  Toolbar,\n  Typography,\n  Button\n} from '@mui/material/';\n\nexport default function ButtonAppBar() {\n  const account = window.walletConnection.account();\n\n  return (\n    <Box sx={{ flexGrow: 1 }}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\n            NEAR Social Good\n          </Typography>\n          {account.accountId ? (\n            <>\n              <Typography variant=\"caption\">{account.accountId}</Typography>\n              <Button sx={{marginLeft: 2}} variant=\"outlined\" color=\"inherit\" onClick={() => logout()}>Logout</Button>\n            </>\n          ) : (\n            <Button color=\"inherit\" onClick={() => login()}>Login</Button>\n          )}\n        </Toolbar>\n      </AppBar>\n    </Box>\n  );\n}","const GAS = 100000000000000;\n\nexport function addCause(cause) {\n  return window.contract.addCause(cause);\n}\n\nexport function getCauses() {\n  return window.contract.getCauses();\n}\n\nexport async function supportCause({ causeIndex, amount }) {\n  await window.contract.supportCause({ causeIndex: causeIndex, amount: amount }, GAS, amount);\n}","import React, { useEffect, useState } from 'react';\nimport { utils } from \"near-api-js\";\n\nimport { getCauses, supportCause } from \"../utils/methods\"\n\nimport {\n  Typography,\n  Container,\n  Grid,\n  Card,\n  CardMedia,\n  CardContent,\n  CardActions,\n  Button,\n  InputAdornment,\n  OutlinedInput,\n} from \"@mui/material\";\n\nfunction Causes() {\n  const [causes, setCauses] = useState([]);\n  const account = window.walletConnection.account();\n\n  useEffect(() => {\n    getCauses()\n      .then(res => {\n        setCauses(res);\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }, []);\n\n  const support = async (causeIndex) => {\n    // console.log(causes[causeIndex]);\n\n    const amount = document.getElementById(`amount-input-${causeIndex}`).value;\n    // console.log(amount);\n\n    supportCause({ causeIndex: causeIndex, amount: utils.format.parseNearAmount(amount + \"\") })\n      .then(res => {\n        getCauses()\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  };\n\n  return (\n    <>\n      <Container sx={{ py: 8 }} maxWidth=\"lg\">\n        {\n          causes.length > 0 ? (\n            <Grid container spacing={4}>\n              {\n                causes.map((cause, i) => (\n                  <Grid key={i} item xs={12} sm={6} md={4}>\n                    <Card\n                      sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}\n                    >\n                      <CardMedia\n                        component=\"img\"\n                        image={cause.image}\n                        alt=\"\"\n                        sx={{ maxHeight: '140px' }}\n                      />\n                      <CardContent sx={{ flexGrow: 1, paddingBottom: 1 }}>\n                        <Typography variant=\"h6\">\n                          {cause.title}\n                        </Typography>\n                        <Typography variant=\"body2\" paragraph>\n                          {cause.description}\n                        </Typography>\n                      </CardContent>\n                      <CardActions sx={{ flexDirection: 'column' }}>\n                        <Typography variant=\"subtitle2\">\n                          Total received: <b>{utils.format.formatNearAmount(cause.amount)} NEAR</b>\n                        </Typography>\n                        <OutlinedInput\n                          fullWidth\n                          inputProps={{ inputMode: 'numeric', pattern: '[0-9]*' }}\n                          id={`amount-input-${i}`}\n                          defaultValue=\"1\"\n                          size=\"small\"\n                          endAdornment={<InputAdornment position=\"end\">NEAR</InputAdornment>}\n                          sx={{ marginBottom: 1 }}\n                          type=\"number\"\n                          onChange={(e) => {\n                            // console.log(e.target.value);\n                            if (e.target.value < 1) e.target.value = 1;\n                          }}\n                        />\n                        <Button\n                          size=\"small\"\n                          fullWidth\n                          variant='contained'\n                          onClick={() => { support(i) }}\n                          disabled={account.accountId === cause.beneficiary || !account.accountId ? true : false}\n                        >\n                          Support cause\n                        </Button>\n                      </CardActions>\n                    </Card>\n                  </Grid>\n                ))\n              }\n            </Grid>\n          ) : (\n            <Container sx={{ py: 8 }} maxWidth=\"md\">\n              <Typography>No causes added yet</Typography>\n            </Container>\n          )\n        }\n      </Container>\n    </>\n  )\n}\n\nexport default Causes;","import React from \"react\";\n\nimport Header from './components/Header'\nimport Causes from './components/Causes'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Header />\n      <Causes />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { initializeContract } from \"./utils/near\";\n\nwindow.nearInitPromise = initializeContract()\n  .then(() => {\n    const root = ReactDOM.createRoot(document.getElementById('root'));\n    root.render(\n      <React.StrictMode>\n        <App />\n      </React.StrictMode>\n    );\n  })\n  .catch(console.error);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}